@inject ISyncLocalStorageService LocalStorage
@inject IKeretaService KeretaService
@implements IDisposable

<EComm_2011501158.Client.Pages.PencarianProduk></EComm_2011501158.Client.Pages.PencarianProduk>

<AuthorizeView>
    <Authorized>
          <a href="login" class="btn btn-info">
              <i class="oi oi-account-logout"></i>
              <span class="badge badge-pill badge-light">
                    Logout
              </span>
          </a>
          <a href="konfirmasi-pesanan" class="btn btn-info">
              <i class="oi oi-calculator"></i>
              <span class="badge badge-pill badge-light">
                  Konfirmasi Pesanan
              </span>
          </a>
    </Authorized>
    <NotAuthorized>
        <a href="login" class="btn btn-info">
            <i class="oi oi-account-login"></i>
            <span class="badge badge-pill badge-light">
                Login
            </span>
        </a>
    </NotAuthorized>
</AuthorizeView>
<a href="keranjang" class="btn btn-info">
    <i class="oi oi-cart"></i>
    <span class="badge badgecard-header-pills badge-light">
        @GetJumlahProduk()
    </span>
</a>
@code {
    protected override void OnInitialized()
    {
        KeretaService.OnChange += StateHasChanged;
    }
    public void Dispose()
    {
        KeretaService.OnChange -= StateHasChanged;
    }
    private int GetJumlahProduk()
    {
        var kereta = LocalStorage.GetItem<List<ProdukVarian>>("kereta");
        return kereta != null ? kereta.Count : 0;
    }
}
